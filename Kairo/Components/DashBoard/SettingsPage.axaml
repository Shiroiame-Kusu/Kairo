<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:Kairo.ViewModels"
             x:Class="Kairo.Components.DashBoard.SettingsPage"
             x:DataType="vm:SettingsPageViewModel"
             VerticalAlignment="Stretch">
  <Grid Margin="12" RowDefinitions="*,Auto">
    <!-- Scrollable settings content -->
    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
      <StackPanel Spacing="16">
        <TextBlock Text="Frpc路径" FontSize="12"/>
        <Grid ColumnDefinitions="*,Auto" >
          <TextBox IsReadOnly="True" Text="{Binding FrpcPath}"/>
          <Button Grid.Column="1" Margin="8,0,0,0" Content="选择文件" Click="SelectFile_OnClick"/>
        </Grid>
        <TextBlock Text="功能" FontSize="12"/>
        <Border  Background="{DynamicResource LayerFillColorDefaultBrush}" Padding="12" CornerRadius="8">
          <WrapPanel ScrollViewer.AllowAutoHide="True">
            <StackPanel Width="140" Spacing="8">
              <ToggleSwitch Content="跟随系统主题" IsChecked="{Binding FollowSystem, Mode=TwoWay}"/>
              <ToggleSwitch Content="使用深色主题" IsEnabled="{Binding CanToggleDarkTheme}" IsChecked="{Binding DarkTheme, Mode=TwoWay}"/>
              <ToggleSwitch Content="调试模式" IsVisible="False" IsChecked="{Binding DebugMode, Mode=TwoWay}"/>
              <!-- <ToggleSwitch x:Name="AutoStartSwitch" Content="开机自动启动" IsCheckedChanged="AutoStartSwitch_OnChanged"/> -->
            </StackPanel>
            <StackPanel Width="140" Spacing="8">
              <ToggleSwitch Content="国内镜像" IsChecked="{Binding UseMirror, Mode=TwoWay}"/>
              <Button x:Name="DownloadFrpcBtn"  Content="下载FRPC" Click="DownloadFrpcBtn_OnClick"/>
            </StackPanel>
            <StackPanel Width="140" Spacing="8">
              <Button x:Name="CopyTokenBtn" Content="复制Token" Click="CopyTokenBtn_OnClick"/>
              <Button x:Name="SignOutBtn" Content="退出登录" Click="SignOutBtn_OnClick"/>
              <Button x:Name="CheckUpdateBtn" Content="检查更新" Click="CheckUpdateBtn_OnClick" IsVisible="False"/>
            </StackPanel>
            <StackPanel Width="180" Spacing="8" IsVisible="False">
              <TextBlock Text="更新分支"/>
              <ComboBox SelectedIndex="{Binding UpdateBranchIndex, Mode=TwoWay}">
                <ComboBoxItem Content="Release"/>
                <ComboBoxItem Content="ReleaseCandidate"/>
                <ComboBoxItem Content="Beta"/>
                <ComboBoxItem Content="Alpha"/>
              </ComboBox>
              <TextBlock FontSize="11" Foreground="Gray" Text="Alpha 可切换至任意分支"/>
            </StackPanel>
            <StackPanel Width="200" Spacing="8" HorizontalAlignment="Left" IsVisible="False">
              <Button x:Name="EasterEggBtn" Content="不要点击这个按钮哦" Click="EasterEggBtn_OnClick" HorizontalAlignment="Center"/>
              <TextBlock Text="会有意想不到的后果" HorizontalAlignment="Center"/>
            </StackPanel>
          </WrapPanel>
        </Border>
      </StackPanel>
    </ScrollViewer>

    <!-- Fixed bottom build info -->
    <Border Grid.Row="1" CornerRadius="8" Background="Transparent" Padding="12" Margin="0,16,0,0">
      <Grid ColumnDefinitions="*,Auto" >
        <TextBlock Text="{Binding BuildInfoText}" FontSize="12" TextWrapping="Wrap"/>
        <StackPanel Grid.Column="1" Margin="24,0,0,0" Spacing="4">
          <TextBlock Text="{Binding VersionText}" FontSize="12"/>
          <TextBlock Text="{Binding DeveloperText}" FontSize="12"/>
          <TextBlock Text="{Binding CopyrightText}" FontSize="12"/>
        </StackPanel>
      </Grid>
    </Border>
  </Grid>
</UserControl>
